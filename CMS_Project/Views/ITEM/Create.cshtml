@{
    ViewBag.Title = "Create Item";
    Layout = "~/Views/Shared/_Layout.cshtml";
}

<fieldset>
    <div class="col-md-4">


        <div class="editor-field">
            @Html.DropDownList("Lang_ID", ViewBag.langlist as SelectList, "Select Language", new { @class = "form-control" })
        </div>

        <br />

        <div class="form-group">
            <input class="form-control" placeholder="Title" id="Title" type="text" autofocus>
        </div>
        <div class="editor-field">
            @Html.TextArea("Content", new { @class = "ckeditor" })
        </div>

        <br />
        <div class="form-group">
            <input class="form-control" placeholder="Image" id="Image" type="text" autofocus>
        </div>
        <div class="form-group">
            <input class="form-control" placeholder="Description" id="Description" type="text" autofocus>
        </div>
        @Html.Hidden("Cat_ID", new { @Value = ViewBag.CatID, name = "hiddenname" })

        <br />

        <p>
            <input onclick="submit()" class="btn btn-lg btn-success btn-block" id="submit" type="submit" value="Create" />
        </p>
        <div>
            @Html.ActionLink("Back to List", "Index")
        </div>
    </div>

</fieldset>



@section Scripts {
    @*@Scripts.Render("~/bundles/jqueryval")*@
    <script src="//code.jquery.com/ui/1.11.4/jquery-ui.js"></script>
    <script>
        function submit() {

            var LanItems = [];
            LanItems.push({
                Lang_ID: $('#Lang_ID').val().trim(),
                Title: $('#Title').val().trim(),
                Content: CKEDITOR.instances['Content'].getData(),
                Image: $('#Image').val().trim(),
                Description: $('#Description').val().trim()
                //Image:files[0]
            });
            var data = {
                Cat_ID: $('#Cat_ID').val().trim(),
                ItemLanguageList: LanItems
            }
            $.ajax({
                url: '/ITEM/CreatePost',
                type: "POST",
                data: JSON.stringify(data),
                dataType: "JSON",
                contentType: "application/json",
                success: function (d) {
                    //check is successfully save to database
                    if (d.status == true) {
                        //will send status from server side
                        alert('Successfully done.');
                    }
                    else {
                        alert('Failed');
                    }
                }
            });
        }
    </script>
}
